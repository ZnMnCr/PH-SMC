{
    "sourceFile": "simulation_scripts/UpdateJacobian.m",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 19,
            "patches": [
                {
                    "date": 1731661573980,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1731661594322,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n %%%%-----------这里坐标系改到下了\r\n z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n-D = [x1; y1; z1];\r\n+DD = [x1; y1; z1];\r\n % 上平台连接点坐标 (x2, y2, z2)\r\n \r\n x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n"
                },
                {
                    "date": 1731661672340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n %%%%-----------这里坐标系改到下了\r\n z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n-DD = [x1; y1; z1];\r\n+DD = [x1; y1; z1;0nes(1.9)];\r\n % 上平台连接点坐标 (x2, y2, z2)\r\n \r\n x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n"
                },
                {
                    "date": 1731661681336,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n %%%%-----------这里坐标系改到下了\r\n z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n-DD = [x1; y1; z1;0nes(1.9)];\r\n+DD = [x1; y1; z1;ones(1.9)];\r\n % 上平台连接点坐标 (x2, y2, z2)\r\n \r\n x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n"
                },
                {
                    "date": 1731661688259,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,66 @@\n+function [J] = UpdateJacobian(x)\r\n+x=[0;0;0;0;0;0];\r\n+% 下平台连接点坐标 (x1, y1, z1)\r\n+x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n+y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n+%%%%-----------这里坐标系改到下了\r\n+z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n+DD = [x1; y1; z1;ones(1,9)];\r\n+% 上平台连接点坐标 (x2, y2, z2)\r\n+\r\n+x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n+y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n+z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n+% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n+platform_center = [mean(x1), mean(y1), mean(z1)];\r\n+% 下平台点到上平台点的对应关系\r\n+index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n+index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n+\r\n+% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n+num_cables = length(x1);\r\n+J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n+% 计算下平台到上平台的变换矩阵\r\n+Txyz = [0, -1, 0, x(1); 1, 0, 0, x(2); 0, 0, 1, x(3); 0, 0, 0 ,1]; \r\n+% 绕x轴翻转指定角度\r\n+\r\n+R_x = [  1, 0,          0,         0;\r\n+         0, cos(x(4)), -sin(x(4)), 0; \r\n+         0, sin(x(4)), cos(x(4)),  0\r\n+         0, 0,          0,         1]; \r\n+\r\n+% 绕y轴翻转指定角度】\r\n+\r\n+R_y = [cos(x(5)),  0, sin(x(5)), 0;  \r\n+       0,          1, 0,         0; \r\n+       -sin(x(5)), 0, cos(x(5)), 0;\r\n+        0,         0, 0,         1];\r\n+\r\n+\r\n+    % 对下平台点进行齐次变换\r\n+    D = Txyz *R_x*R_y* DD;\r\n+    % 计算每根绳索的方向余弦和力矩分量\r\n+for i = 1:num_cables\r\n+\r\n+% 获取当前绳索的下平台和上平台连接点\r\n+    lower_idx = index_lower(i);\r\n+    upper_idx = index_upper(i);\r\n+    \r\n+    % 计算绳索方向向量\r\n+    Lx = x2(upper_idx) - D(1,lower_idx);\r\n+    Ly = y2(upper_idx) - D(2,lower_idx);\r\n+    Lz = z2(upper_idx) - D(3,lower_idx);\r\n+    CableVector = [Lx; Ly; Lz];\r\n+    % 计算绳索长度\r\n+    L_length = norm([Lx; Ly; Lz]);\r\n+    \r\n+    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n+    J(1:3, i) = CableVector / L_length;\r\n+    \r\n+    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n+    b_vector = [D(1,lower_idx) - platform_center(1); \r\n+                D(2,lower_idx) - platform_center(2); \r\n+                D(3,lower_idx) - platform_center(3)];\r\n+    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n+end\r\n+\r\n"
                },
                {
                    "date": 1731661694325,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n %%%%-----------这里坐标系改到下了\r\n z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n-DD = [x1; y1; z1;ones(1,9)];\r\n+DD = [x1; y1; z1;ones(1,8)];\r\n % 上平台连接点坐标 (x2, y2, z2)\r\n \r\n x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n@@ -63,70 +63,4 @@\n                 D(3,lower_idx) - platform_center(3)];\r\n     J(4:6, i) = cross(b_vector, J(1:3, i));\r\n end\r\n \r\n-function [J] = UpdateJacobian(x)\r\n-x=[0;0;0;0;0;0];\r\n-% 下平台连接点坐标 (x1, y1, z1)\r\n-x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n-y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n-%%%%-----------这里坐标系改到下了\r\n-z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n-DD = [x1; y1; z1;ones(1.9)];\r\n-% 上平台连接点坐标 (x2, y2, z2)\r\n-\r\n-x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n-y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n-z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n-% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n-platform_center = [mean(x1), mean(y1), mean(z1)];\r\n-% 下平台点到上平台点的对应关系\r\n-index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n-index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n-\r\n-% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n-num_cables = length(x1);\r\n-J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n-% 计算下平台到上平台的变换矩阵\r\n-Txyz = [0, -1, 0, x(1); 1, 0, 0, x(2); 0, 0, 1, x(3); 0, 0, 0 ,1]; \r\n-% 绕x轴翻转指定角度\r\n-\r\n-R_x = [  1, 0,          0,         0;\r\n-         0, cos(x(4)), -sin(x(4)), 0; \r\n-         0, sin(x(4)), cos(x(4)),  0\r\n-         0, 0,          0,         1]; \r\n-\r\n-% 绕y轴翻转指定角度】\r\n-\r\n-R_y = [cos(x(5)),  0, sin(x(5)), 0;  \r\n-       0,          1, 0,         0; \r\n-       -sin(x(5)), 0, cos(x(5)), 0;\r\n-        0,         0, 0,         1];\r\n-\r\n-\r\n-    % 对下平台点进行齐次变换\r\n-    D = Txyz *R_x*R_y* DD;\r\n-    % 计算每根绳索的方向余弦和力矩分量\r\n-for i = 1:num_cables\r\n-\r\n-% 获取当前绳索的下平台和上平台连接点\r\n-    lower_idx = index_lower(i);\r\n-    upper_idx = index_upper(i);\r\n-    \r\n-    % 计算绳索方向向量\r\n-    Lx = x2(upper_idx) - D(1,lower_idx);\r\n-    Ly = y2(upper_idx) - D(2,lower_idx);\r\n-    Lz = z2(upper_idx) - D(3,lower_idx);\r\n-    CableVector = [Lx; Ly; Lz];\r\n-    % 计算绳索长度\r\n-    L_length = norm([Lx; Ly; Lz]);\r\n-    \r\n-    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n-    J(1:3, i) = CableVector / L_length;\r\n-    \r\n-    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n-    b_vector = [D(1,lower_idx) - platform_center(1); \r\n-                D(2,lower_idx) - platform_center(2); \r\n-                D(3,lower_idx) - platform_center(3)];\r\n-    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n-end\r\n-\r\n"
                },
                {
                    "date": 1731661767423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,12 @@\n % 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n num_cables = length(x1);\r\n J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n % 计算下平台到上平台的变换矩阵\r\n-Txyz = [0, -1, 0, x(1); 1, 0, 0, x(2); 0, 0, 1, x(3); 0, 0, 0 ,1]; \r\n+Txyz = [0, -1, 0, x(1);\r\n+        1, 0, 0,  x(2);\r\n+        0, 0, 1,  x(3); \r\n+         0, 0, 0  ,1]; \r\n % 绕x轴翻转指定角度\r\n \r\n R_x = [  1, 0,          0,         0;\r\n          0, cos(x(4)), -sin(x(4)), 0; \r\n@@ -37,9 +40,9 @@\n         0,         0, 0,         1];\r\n \r\n \r\n     % 对下平台点进行齐次变换\r\n-    D = Txyz *R_x*R_y* DD;\r\n+    D = DD;\r\n     % 计算每根绳索的方向余弦和力矩分量\r\n for i = 1:num_cables\r\n \r\n % 获取当前绳索的下平台和上平台连接点\r\n"
                },
                {
                    "date": 1731661883424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,9 @@\n         0,         0, 0,         1];\r\n \r\n \r\n     % 对下平台点进行齐次变换\r\n-    D = DD;\r\n+    D = Txyz *R_x*R_y* DD\r\n     % 计算每根绳索的方向余弦和力矩分量\r\n for i = 1:num_cables\r\n \r\n % 获取当前绳索的下平台和上平台连接点\r\n"
                },
                {
                    "date": 1731661895117,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n        0,          1, 0,         0; \r\n        -sin(x(5)), 0, cos(x(5)), 0;\r\n         0,         0, 0,         1];\r\n \r\n-\r\n+DD\r\n     % 对下平台点进行齐次变换\r\n     D = Txyz *R_x*R_y* DD\r\n     % 计算每根绳索的方向余弦和力矩分量\r\n for i = 1:num_cables\r\n"
                },
                {
                    "date": 1731662037179,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,69 @@\n+function [J] = UpdateJacobian(x)\r\n+x=[0;0;0;0;0;0];\r\n+% 下平台连接点坐标 (x1, y1, z1)\r\n+x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n+y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n+%%%%-----------这里坐标系改到下了\r\n+z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n+DD = [x1; y1; z1;ones(1,8)];\r\n+% 上平台连接点坐标 (x2, y2, z2)\r\n+\r\n+x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n+y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n+z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n+% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n+platform_center = [mean(x1), mean(y1), mean(z1)];\r\n+% 下平台点到上平台点的对应关系\r\n+index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n+index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n+\r\n+% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n+num_cables = length(x1);\r\n+J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n+% 计算下平台到上平台的变换矩阵\r\n+Txyz = [0, -1, 0, x(1);\r\n+        1, 0, 0,  x(2);\r\n+        0, 0, 1,  x(3); \r\n+         0, 0, 0  ,1]; \r\n+% 绕x轴翻转指定角度\r\n+\r\n+R_x = [  1, 0,          0,         0;\r\n+         0, cos(x(4)), sin(x(4)), 0; \r\n+         0, -sin(x(4)), cos(x(4)),  0\r\n+         0, 0,          0,         1]; \r\n+\r\n+% 绕y轴翻转指定角度】\r\n+\r\n+R_y = [cos(x(5)),  0, -sin(x(5)), 0;  \r\n+       0,          1, 0,         0; \r\n+       sin(x(5)), 0, cos(x(5)), 0;\r\n+        0,         0, 0,         1];\r\n+\r\n+DD\r\n+    % 对下平台点进行齐次变换\r\n+    D = Txyz *R_x*R_y* DD\r\n+    % 计算每根绳索的方向余弦和力矩分量\r\n+for i = 1:num_cables\r\n+\r\n+% 获取当前绳索的下平台和上平台连接点\r\n+    lower_idx = index_lower(i);\r\n+    upper_idx = index_upper(i);\r\n+    \r\n+    % 计算绳索方向向量\r\n+    Lx = x2(upper_idx) - D(1,lower_idx);\r\n+    Ly = y2(upper_idx) - D(2,lower_idx);\r\n+    Lz = z2(upper_idx) - D(3,lower_idx);\r\n+    CableVector = [Lx; Ly; Lz];\r\n+    % 计算绳索长度\r\n+    L_length = norm([Lx; Ly; Lz]);\r\n+    \r\n+    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n+    J(1:3, i) = CableVector / L_length;\r\n+    \r\n+    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n+    b_vector = [D(1,lower_idx) - platform_center(1); \r\n+                D(2,lower_idx) - platform_center(2); \r\n+                D(3,lower_idx) - platform_center(3)];\r\n+    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n+end\r\n+\r\n"
                },
                {
                    "date": 1731662069396,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,10 +20,10 @@\n % 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n num_cables = length(x1);\r\n J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n % 计算下平台到上平台的变换矩阵\r\n-Txyz = [0, -1, 0, x(1);\r\n-        1, 0, 0,  x(2);\r\n+Txyz = [1, 0, 0, x(1);\r\n+        0, 1, 0,  x(2);\r\n         0, 0, 1,  x(3); \r\n          0, 0, 0  ,1]; \r\n % 绕x轴翻转指定角度\r\n \r\n@@ -66,73 +66,4 @@\n                 D(3,lower_idx) - platform_center(3)];\r\n     J(4:6, i) = cross(b_vector, J(1:3, i));\r\n end\r\n \r\n-function [J] = UpdateJacobian(x)\r\n-x=[0;0;0;0;0;0];\r\n-% 下平台连接点坐标 (x1, y1, z1)\r\n-x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n-y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n-%%%%-----------这里坐标系改到下了\r\n-z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n-DD = [x1; y1; z1;ones(1,8)];\r\n-% 上平台连接点坐标 (x2, y2, z2)\r\n-\r\n-x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n-y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n-z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n-% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n-platform_center = [mean(x1), mean(y1), mean(z1)];\r\n-% 下平台点到上平台点的对应关系\r\n-index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n-index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n-\r\n-% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n-num_cables = length(x1);\r\n-J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n-% 计算下平台到上平台的变换矩阵\r\n-Txyz = [0, -1, 0, x(1);\r\n-        1, 0, 0,  x(2);\r\n-        0, 0, 1,  x(3); \r\n-         0, 0, 0  ,1]; \r\n-% 绕x轴翻转指定角度\r\n-\r\n-R_x = [  1, 0,          0,         0;\r\n-         0, cos(x(4)), -sin(x(4)), 0; \r\n-         0, sin(x(4)), cos(x(4)),  0\r\n-         0, 0,          0,         1]; \r\n-\r\n-% 绕y轴翻转指定角度】\r\n-\r\n-R_y = [cos(x(5)),  0, sin(x(5)), 0;  \r\n-       0,          1, 0,         0; \r\n-       -sin(x(5)), 0, cos(x(5)), 0;\r\n-        0,         0, 0,         1];\r\n-\r\n-DD\r\n-    % 对下平台点进行齐次变换\r\n-    D = Txyz *R_x*R_y* DD\r\n-    % 计算每根绳索的方向余弦和力矩分量\r\n-for i = 1:num_cables\r\n-\r\n-% 获取当前绳索的下平台和上平台连接点\r\n-    lower_idx = index_lower(i);\r\n-    upper_idx = index_upper(i);\r\n-    \r\n-    % 计算绳索方向向量\r\n-    Lx = x2(upper_idx) - D(1,lower_idx);\r\n-    Ly = y2(upper_idx) - D(2,lower_idx);\r\n-    Lz = z2(upper_idx) - D(3,lower_idx);\r\n-    CableVector = [Lx; Ly; Lz];\r\n-    % 计算绳索长度\r\n-    L_length = norm([Lx; Ly; Lz]);\r\n-    \r\n-    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n-    J(1:3, i) = CableVector / L_length;\r\n-    \r\n-    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n-    b_vector = [D(1,lower_idx) - platform_center(1); \r\n-                D(2,lower_idx) - platform_center(2); \r\n-                D(3,lower_idx) - platform_center(3)];\r\n-    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n-end\r\n-\r\n"
                },
                {
                    "date": 1731662091175,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,72 @@\n+function [J] = UpdateJacobian(x)\r\n+clc\r\n+clear all\r\n+\r\n+    x=[0;0;0;0;0;0];\r\n+% 下平台连接点坐标 (x1, y1, z1)\r\n+x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n+y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n+%%%%-----------这里坐标系改到下了\r\n+z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n+DD = [x1; y1; z1;ones(1,8)];\r\n+% 上平台连接点坐标 (x2, y2, z2)\r\n+\r\n+x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n+y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n+z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n+% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n+platform_center = [mean(x1), mean(y1), mean(z1)];\r\n+% 下平台点到上平台点的对应关系\r\n+index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n+index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n+\r\n+% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n+num_cables = length(x1);\r\n+J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n+% 计算下平台到上平台的变换矩阵\r\n+Txyz = [1, 0, 0, x(1);\r\n+        0, 1, 0,  x(2);\r\n+        0, 0, 1,  x(3); \r\n+         0, 0, 0  ,1]; \r\n+% 绕x轴翻转指定角度\r\n+\r\n+R_x = [  1, 0,          0,         0;\r\n+         0, cos(x(4)), sin(x(4)), 0; \r\n+         0, -sin(x(4)), cos(x(4)),  0\r\n+         0, 0,          0,         1]; \r\n+\r\n+% 绕y轴翻转指定角度】\r\n+\r\n+R_y = [cos(x(5)),  0, -sin(x(5)), 0;  \r\n+       0,          1, 0,         0; \r\n+       sin(x(5)), 0, cos(x(5)), 0;\r\n+        0,         0, 0,         1];\r\n+\r\n+DD\r\n+    % 对下平台点进行齐次变换\r\n+    D = Txyz *R_x*R_y* DD\r\n+    % 计算每根绳索的方向余弦和力矩分量\r\n+for i = 1:num_cables\r\n+\r\n+% 获取当前绳索的下平台和上平台连接点\r\n+    lower_idx = index_lower(i);\r\n+    upper_idx = index_upper(i);\r\n+    \r\n+    % 计算绳索方向向量\r\n+    Lx = x2(upper_idx) - D(1,lower_idx);\r\n+    Ly = y2(upper_idx) - D(2,lower_idx);\r\n+    Lz = z2(upper_idx) - D(3,lower_idx);\r\n+    CableVector = [Lx; Ly; Lz];\r\n+    % 计算绳索长度\r\n+    L_length = norm([Lx; Ly; Lz]);\r\n+    \r\n+    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n+    J(1:3, i) = CableVector / L_length;\r\n+    \r\n+    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n+    b_vector = [D(1,lower_idx) - platform_center(1); \r\n+                D(2,lower_idx) - platform_center(2); \r\n+                D(3,lower_idx) - platform_center(3)];\r\n+    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n+end\r\n+\r\n"
                },
                {
                    "date": 1731662103879,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n function [J] = UpdateJacobian(x)\r\n clc\r\n clear all\r\n \r\n-    x=[0;0;0;0;0;0];\r\n+    x=[10;0;0;0;0;0];\r\n % 下平台连接点坐标 (x1, y1, z1)\r\n x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n %%%%-----------这里坐标系改到下了\r\n@@ -69,73 +69,4 @@\n                 D(3,lower_idx) - platform_center(3)];\r\n     J(4:6, i) = cross(b_vector, J(1:3, i));\r\n end\r\n \r\n-function [J] = UpdateJacobian(x)\r\n-x=[0;0;0;0;0;0];\r\n-% 下平台连接点坐标 (x1, y1, z1)\r\n-x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n-y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n-%%%%-----------这里坐标系改到下了\r\n-z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n-DD = [x1; y1; z1;ones(1,8)];\r\n-% 上平台连接点坐标 (x2, y2, z2)\r\n-\r\n-x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n-y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n-z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n-% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n-platform_center = [mean(x1), mean(y1), mean(z1)];\r\n-% 下平台点到上平台点的对应关系\r\n-index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n-index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n-\r\n-% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n-num_cables = length(x1);\r\n-J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n-% 计算下平台到上平台的变换矩阵\r\n-Txyz = [1, 0, 0, x(1);\r\n-        0, 1, 0,  x(2);\r\n-        0, 0, 1,  x(3); \r\n-         0, 0, 0  ,1]; \r\n-% 绕x轴翻转指定角度\r\n-\r\n-R_x = [  1, 0,          0,         0;\r\n-         0, cos(x(4)), sin(x(4)), 0; \r\n-         0, -sin(x(4)), cos(x(4)),  0\r\n-         0, 0,          0,         1]; \r\n-\r\n-% 绕y轴翻转指定角度】\r\n-\r\n-R_y = [cos(x(5)),  0, -sin(x(5)), 0;  \r\n-       0,          1, 0,         0; \r\n-       sin(x(5)), 0, cos(x(5)), 0;\r\n-        0,         0, 0,         1];\r\n-\r\n-DD\r\n-    % 对下平台点进行齐次变换\r\n-    D = Txyz *R_x*R_y* DD\r\n-    % 计算每根绳索的方向余弦和力矩分量\r\n-for i = 1:num_cables\r\n-\r\n-% 获取当前绳索的下平台和上平台连接点\r\n-    lower_idx = index_lower(i);\r\n-    upper_idx = index_upper(i);\r\n-    \r\n-    % 计算绳索方向向量\r\n-    Lx = x2(upper_idx) - D(1,lower_idx);\r\n-    Ly = y2(upper_idx) - D(2,lower_idx);\r\n-    Lz = z2(upper_idx) - D(3,lower_idx);\r\n-    CableVector = [Lx; Ly; Lz];\r\n-    % 计算绳索长度\r\n-    L_length = norm([Lx; Ly; Lz]);\r\n-    \r\n-    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n-    J(1:3, i) = CableVector / L_length;\r\n-    \r\n-    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n-    b_vector = [D(1,lower_idx) - platform_center(1); \r\n-                D(2,lower_idx) - platform_center(2); \r\n-                D(3,lower_idx) - platform_center(3)];\r\n-    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n-end\r\n-\r\n"
                },
                {
                    "date": 1731662126802,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n function [J] = UpdateJacobian(x)\r\n clc\r\n clear all\r\n \r\n-    x=[10;0;0;0;0;0];\r\n+    x=[10;0;0;45;0;0];\r\n % 下平台连接点坐标 (x1, y1, z1)\r\n x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n %%%%-----------这里坐标系改到下了\r\n"
                },
                {
                    "date": 1731662133057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n function [J] = UpdateJacobian(x)\r\n clc\r\n clear all\r\n \r\n-    x=[10;0;0;45;0;0];\r\n+    x=[10;0;0;pi/2;0;0];\r\n % 下平台连接点坐标 (x1, y1, z1)\r\n x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n %%%%-----------这里坐标系改到下了\r\n"
                },
                {
                    "date": 1731662140207,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n function [J] = UpdateJacobian(x)\r\n clc\r\n clear all\r\n \r\n-    x=[10;0;0;pi/2;0;0];\r\n+    x=[0;0;0;pi/2;0;0];\r\n % 下平台连接点坐标 (x1, y1, z1)\r\n x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n %%%%-----------这里坐标系改到下了\r\n"
                },
                {
                    "date": 1731662169888,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,69 @@\n+function [J] = UpdateJacobian(x)\r\n+\r\n+% 下平台连接点坐标 (x1, y1, z1)\r\n+x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n+y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n+%%%%-----------这里坐标系改到下了\r\n+z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n+DD = [x1; y1; z1;ones(1,8)];\r\n+% 上平台连接点坐标 (x2, y2, z2)\r\n+\r\n+x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n+y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n+z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n+% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n+platform_center = [mean(x1), mean(y1), mean(z1)];\r\n+% 下平台点到上平台点的对应关系\r\n+index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n+index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n+\r\n+% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n+num_cables = length(x1);\r\n+J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n+% 计算下平台到上平台的变换矩阵\r\n+Txyz = [1, 0, 0, x(1);\r\n+        0, 1, 0,  x(2);\r\n+        0, 0, 1,  x(3); \r\n+         0, 0, 0  ,1]; \r\n+% 绕x轴翻转指定角度\r\n+\r\n+R_x = [  1, 0,          0,         0;\r\n+         0, cos(x(4)), sin(x(4)), 0; \r\n+         0, -sin(x(4)), cos(x(4)),  0\r\n+         0, 0,          0,         1]; \r\n+\r\n+% 绕y轴翻转指定角度】\r\n+\r\n+R_y = [cos(x(5)),  0, -sin(x(5)), 0;  \r\n+       0,          1, 0,         0; \r\n+       sin(x(5)), 0, cos(x(5)), 0;\r\n+        0,         0, 0,         1];\r\n+\r\n+DD\r\n+    % 对下平台点进行齐次变换\r\n+    D = Txyz *R_x*R_y* DD\r\n+    % 计算每根绳索的方向余弦和力矩分量\r\n+for i = 1:num_cables\r\n+\r\n+% 获取当前绳索的下平台和上平台连接点\r\n+    lower_idx = index_lower(i);\r\n+    upper_idx = index_upper(i);\r\n+    \r\n+    % 计算绳索方向向量\r\n+    Lx = x2(upper_idx) - D(1,lower_idx);\r\n+    Ly = y2(upper_idx) - D(2,lower_idx);\r\n+    Lz = z2(upper_idx) - D(3,lower_idx);\r\n+    CableVector = [Lx; Ly; Lz];\r\n+    % 计算绳索长度\r\n+    L_length = norm([Lx; Ly; Lz]);\r\n+    \r\n+    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n+    J(1:3, i) = CableVector / L_length;\r\n+    \r\n+    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n+    b_vector = [D(1,lower_idx) - platform_center(1); \r\n+                D(2,lower_idx) - platform_center(2); \r\n+                D(3,lower_idx) - platform_center(3)];\r\n+    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n+end\r\n+\r\n"
                },
                {
                    "date": 1731662466450,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,69 @@\n+function [J] = UpdateJacobian(x)\r\n+\r\n+% 下平台连接点坐标 (x1, y1, z1)\r\n+x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n+y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n+%%%%-----------这里坐标系改到下了\r\n+z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n+DD = [x1; y1; z1;ones(1,8)];\r\n+% 上平台连接点坐标 (x2, y2, z2)\r\n+\r\n+x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n+y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n+z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n+% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n+platform_center = [mean(x1), mean(y1), mean(z1)];\r\n+% 下平台点到上平台点的对应关系\r\n+index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n+index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n+\r\n+% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n+num_cables = length(x1);\r\n+J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n+% 计算下平台到上平台的变换矩阵\r\n+Txyz = [1, 0, 0, x(1);\r\n+        0, 1, 0,  x(2);\r\n+        0, 0, 1,  x(3); \r\n+         0, 0, 0  ,1]; \r\n+% 绕x轴翻转指定角度\r\n+\r\n+R_x = [  1, 0,          0,         0;\r\n+         0, cos(x(4)), sin(x(4)), 0; \r\n+         0, -sin(x(4)), cos(x(4)),  0\r\n+         0, 0,          0,         1]; \r\n+\r\n+% 绕y轴翻转指定角度】\r\n+\r\n+R_y = [cos(x(5)),  0, -sin(x(5)), 0;  \r\n+       0,          1, 0,         0; \r\n+       sin(x(5)), 0, cos(x(5)), 0;\r\n+        0,         0, 0,         1];\r\n+\r\n+\r\n+    % 对下平台点进行齐次变换\r\n+    D = Txyz *R_x*R_y* DD;\r\n+    % 计算每根绳索的方向余弦和力矩分量\r\n+for i = 1:num_cables\r\n+\r\n+% 获取当前绳索的下平台和上平台连接点\r\n+    lower_idx = index_lower(i);\r\n+    upper_idx = index_upper(i);\r\n+    \r\n+    % 计算绳索方向向量\r\n+    Lx = x2(upper_idx) - D(1,lower_idx);\r\n+    Ly = y2(upper_idx) - D(2,lower_idx);\r\n+    Lz = z2(upper_idx) - D(3,lower_idx);\r\n+    CableVector = [Lx; Ly; Lz];\r\n+    % 计算绳索长度\r\n+    L_length = norm([Lx; Ly; Lz]);\r\n+    \r\n+    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n+    J(1:3, i) = CableVector / L_length;\r\n+    \r\n+    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n+    b_vector = [D(1,lower_idx) - platform_center(1); \r\n+                D(2,lower_idx) - platform_center(2); \r\n+                D(3,lower_idx) - platform_center(3)];\r\n+    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n+end\r\n+\r\n"
                },
                {
                    "date": 1731662888985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,17 @@\n function [J] = UpdateJacobian(x)\r\n \r\n % 下平台连接点坐标 (x1, y1, z1)\r\n-x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n-y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n+x1 = [100, 0, -100, 0, 0, 20, 0, -20]*0.1;\r\n+y1 = [0, -100, 0, 100, 20, 0, -20, 0]*0.1;\r\n %%%%-----------这里坐标系改到下了\r\n z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n DD = [x1; y1; z1;ones(1,8)];\r\n % 上平台连接点坐标 (x2, y2, z2)\r\n \r\n-x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n-y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n-z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n+x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ]*0.1;\r\n+y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ]*0.1;\r\n+z2 = [500, 500, 500, 500, 500,  500, 500, 500]*0.1;\r\n % 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n platform_center = [mean(x1), mean(y1), mean(z1)];\r\n % 下平台点到上平台点的对应关系\r\n index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n@@ -66,145 +66,4 @@\n                 D(3,lower_idx) - platform_center(3)];\r\n     J(4:6, i) = cross(b_vector, J(1:3, i));\r\n end\r\n \r\n-function [J] = UpdateJacobian(x)\r\n-\r\n-% 下平台连接点坐标 (x1, y1, z1)\r\n-x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n-y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n-%%%%-----------这里坐标系改到下了\r\n-z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n-DD = [x1; y1; z1;ones(1,8)];\r\n-% 上平台连接点坐标 (x2, y2, z2)\r\n-\r\n-x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n-y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n-z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n-% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n-platform_center = [mean(x1), mean(y1), mean(z1)];\r\n-% 下平台点到上平台点的对应关系\r\n-index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n-index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n-\r\n-% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n-num_cables = length(x1);\r\n-J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n-% 计算下平台到上平台的变换矩阵\r\n-Txyz = [1, 0, 0, x(1);\r\n-        0, 1, 0,  x(2);\r\n-        0, 0, 1,  x(3); \r\n-         0, 0, 0  ,1]; \r\n-% 绕x轴翻转指定角度\r\n-\r\n-R_x = [  1, 0,          0,         0;\r\n-         0, cos(x(4)), sin(x(4)), 0; \r\n-         0, -sin(x(4)), cos(x(4)),  0\r\n-         0, 0,          0,         1]; \r\n-\r\n-% 绕y轴翻转指定角度】\r\n-\r\n-R_y = [cos(x(5)),  0, -sin(x(5)), 0;  \r\n-       0,          1, 0,         0; \r\n-       sin(x(5)), 0, cos(x(5)), 0;\r\n-        0,         0, 0,         1];\r\n-\r\n-DD\r\n-    % 对下平台点进行齐次变换\r\n-    D = Txyz *R_x*R_y* DD\r\n-    % 计算每根绳索的方向余弦和力矩分量\r\n-for i = 1:num_cables\r\n-\r\n-% 获取当前绳索的下平台和上平台连接点\r\n-    lower_idx = index_lower(i);\r\n-    upper_idx = index_upper(i);\r\n-    \r\n-    % 计算绳索方向向量\r\n-    Lx = x2(upper_idx) - D(1,lower_idx);\r\n-    Ly = y2(upper_idx) - D(2,lower_idx);\r\n-    Lz = z2(upper_idx) - D(3,lower_idx);\r\n-    CableVector = [Lx; Ly; Lz];\r\n-    % 计算绳索长度\r\n-    L_length = norm([Lx; Ly; Lz]);\r\n-    \r\n-    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n-    J(1:3, i) = CableVector / L_length;\r\n-    \r\n-    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n-    b_vector = [D(1,lower_idx) - platform_center(1); \r\n-                D(2,lower_idx) - platform_center(2); \r\n-                D(3,lower_idx) - platform_center(3)];\r\n-    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n-end\r\n-\r\n-function [J] = UpdateJacobian(x)\r\n-clc\r\n-clear all\r\n-\r\n-    x=[0;0;0;pi/2;0;0];\r\n-% 下平台连接点坐标 (x1, y1, z1)\r\n-x1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\n-y1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n-%%%%-----------这里坐标系改到下了\r\n-z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n-DD = [x1; y1; z1;ones(1,8)];\r\n-% 上平台连接点坐标 (x2, y2, z2)\r\n-\r\n-x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\n-y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\n-z2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n-% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n-platform_center = [mean(x1), mean(y1), mean(z1)];\r\n-% 下平台点到上平台点的对应关系\r\n-index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n-index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n-\r\n-% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n-num_cables = length(x1);\r\n-J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n-% 计算下平台到上平台的变换矩阵\r\n-Txyz = [1, 0, 0, x(1);\r\n-        0, 1, 0,  x(2);\r\n-        0, 0, 1,  x(3); \r\n-         0, 0, 0  ,1]; \r\n-% 绕x轴翻转指定角度\r\n-\r\n-R_x = [  1, 0,          0,         0;\r\n-         0, cos(x(4)), sin(x(4)), 0; \r\n-         0, -sin(x(4)), cos(x(4)),  0\r\n-         0, 0,          0,         1]; \r\n-\r\n-% 绕y轴翻转指定角度】\r\n-\r\n-R_y = [cos(x(5)),  0, -sin(x(5)), 0;  \r\n-       0,          1, 0,         0; \r\n-       sin(x(5)), 0, cos(x(5)), 0;\r\n-        0,         0, 0,         1];\r\n-\r\n-DD\r\n-    % 对下平台点进行齐次变换\r\n-    D = Txyz *R_x*R_y* DD\r\n-    % 计算每根绳索的方向余弦和力矩分量\r\n-for i = 1:num_cables\r\n-\r\n-% 获取当前绳索的下平台和上平台连接点\r\n-    lower_idx = index_lower(i);\r\n-    upper_idx = index_upper(i);\r\n-    \r\n-    % 计算绳索方向向量\r\n-    Lx = x2(upper_idx) - D(1,lower_idx);\r\n-    Ly = y2(upper_idx) - D(2,lower_idx);\r\n-    Lz = z2(upper_idx) - D(3,lower_idx);\r\n-    CableVector = [Lx; Ly; Lz];\r\n-    % 计算绳索长度\r\n-    L_length = norm([Lx; Ly; Lz]);\r\n-    \r\n-    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n-    J(1:3, i) = CableVector / L_length;\r\n-    \r\n-    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n-    b_vector = [D(1,lower_idx) - platform_center(1); \r\n-                D(2,lower_idx) - platform_center(2); \r\n-                D(3,lower_idx) - platform_center(3)];\r\n-    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n-end\r\n-\r\n"
                },
                {
                    "date": 1731674109039,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,69 @@\n+function [J] = UpdateJacobian(x)\r\n+\r\n+% 下平台连接点坐标 (x1, y1, z1)\r\n+x1 = [100, 0, -100, 0, 0, 20, 0, -20]*0.1;\r\n+y1 = [0, -100, 0, 100, 20, 0, -20, 0]*0.1;\r\n+%%%%-----------这里坐标系改到下了\r\n+z1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\n+DD = [x1; y1; z1;ones(1,8)];\r\n+% 上平台连接点坐标 (x2, y2, z2)\r\n+\r\n+x2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ]*0.1;\r\n+y2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ]*0.1;\r\n+z2 = [500, 500, 500, 500, 500,  500, 500, 500]*0.1;\r\n+% 下平台点到上平台点的对应关系\r\n+index_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\n+index_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n+\r\n+% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\n+num_cables = length(x1);\r\n+J = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n+% 计算下平台到上平台的变换矩阵\r\n+Txyz = [1, 0, 0, x(1);\r\n+        0, 1, 0,  x(2);\r\n+        0, 0, 1,  x(3); \r\n+         0, 0, 0  ,1]; \r\n+% 绕x轴翻转指定角度\r\n+\r\n+R_x = [  1, 0,          0,         0;\r\n+         0, cos(x(4)), -sin(x(4)), 0; \r\n+         0, sin(x(4)), cos(x(4)),  0\r\n+         0, 0,          0,         1]; \r\n+\r\n+% 绕y轴翻转指定角度】\r\n+\r\n+R_y = [cos(x(5)),  0, sin(x(5)), 0;  \r\n+       0,          1, 0,         0; \r\n+       -sin(x(5)), 0, cos(x(5)), 0;\r\n+        0,         0, 0,         1];\r\n+\r\n+\r\n+    % 对下平台点进行齐次变换\r\n+    D = Txyz *R_x*R_y* DD;\r\n+   % 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\n+   platform_center = [mean(D(1,:)), mean(D(2,:)), mean(D(3,:))];\r\n+    % 计算每根绳索的方向余弦和力矩分量\r\n+for i = 1:num_cables\r\n+\r\n+% 获取当前绳索的下平台和上平台连接点\r\n+    lower_idx = index_lower(i);\r\n+    upper_idx = index_upper(i);\r\n+    \r\n+    % 计算绳索方向向量\r\n+    Lx = x2(upper_idx) - D(1,lower_idx);\r\n+    Ly = y2(upper_idx) - D(2,lower_idx);\r\n+    Lz = z2(upper_idx) - D(3,lower_idx);\r\n+    CableVector = [Lx; Ly; Lz];\r\n+    % 计算绳索长度\r\n+    L_length = norm([Lx; Ly; Lz]);\r\n+    \r\n+    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n+    J(1:3, i) = CableVector / L_length;\r\n+    \r\n+    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n+    b_vector = [D(1,lower_idx) - platform_center(1); \r\n+                D(2,lower_idx) - platform_center(2); \r\n+                D(3,lower_idx) - platform_center(3)];\r\n+    J(4:6, i) = cross(b_vector, J(1:3, i));\r\n+end\r\n+\r\n"
                }
            ],
            "date": 1731661573980,
            "name": "Commit-0",
            "content": "function [J] = UpdateJacobian(x)\r\nx=[0;0;0;0;0;0];\r\n% 下平台连接点坐标 (x1, y1, z1)\r\nx1 = [100, 0, -100, 0, 0, 20, 0, -20];\r\ny1 = [0, -100, 0, 100, 20, 0, -20, 0];\r\n%%%%-----------这里坐标系改到下了\r\nz1 = [0, 0, 0, 0, 0, 0, 0, 0];\r\nD = [x1; y1; z1];\r\n% 上平台连接点坐标 (x2, y2, z2)\r\n\r\nx2 = [565, 465,  0 ,  0 ,-565, -465,  0,   0 ];\r\ny2 = [ 0 ,  0 ,-525,-425,  0 ,   0 , 525, 425 ];\r\nz2 = [500, 500, 500, 500, 500,  500, 500, 500];\r\n% 平台中心坐标 (假设平台中心在下平台上，z1的平均值)\r\nplatform_center = [mean(x1), mean(y1), mean(z1)];\r\n% 下平台点到上平台点的对应关系\r\nindex_lower = [1, 2, 3, 4, 5, 6, 7, 8];\r\nindex_upper = [1, 3, 5, 7, 8, 2, 4, 6];\r\n\r\n% 初始化雅克比矩阵 (包含线速度和力矩部分)\r\nnum_cables = length(x1);\r\nJ = zeros(6, num_cables);  % 6行表示x, y, z分量和力矩分量\r\n% 计算下平台到上平台的变换矩阵\r\nTxyz = [0, -1, 0, x(1); 1, 0, 0, x(2); 0, 0, 1, x(3); 0, 0, 0 ,1]; \r\n% 绕x轴翻转指定角度\r\n\r\nR_x = [  1, 0,          0,         0;\r\n         0, cos(x(4)), -sin(x(4)), 0; \r\n         0, sin(x(4)), cos(x(4)),  0\r\n         0, 0,          0,         1]; \r\n\r\n% 绕y轴翻转指定角度】\r\n\r\nR_y = [cos(x(5)),  0, sin(x(5)), 0;  \r\n       0,          1, 0,         0; \r\n       -sin(x(5)), 0, cos(x(5)), 0;\r\n        0,         0, 0,         1];\r\n\r\n\r\n    % 对下平台点进行齐次变换\r\n    D = Txyz *R_x*R_y* DD;\r\n    % 计算每根绳索的方向余弦和力矩分量\r\nfor i = 1:num_cables\r\n\r\n% 获取当前绳索的下平台和上平台连接点\r\n    lower_idx = index_lower(i);\r\n    upper_idx = index_upper(i);\r\n    \r\n    % 计算绳索方向向量\r\n    Lx = x2(upper_idx) - D(1,lower_idx);\r\n    Ly = y2(upper_idx) - D(2,lower_idx);\r\n    Lz = z2(upper_idx) - D(3,lower_idx);\r\n    CableVector = [Lx; Ly; Lz];\r\n    % 计算绳索长度\r\n    L_length = norm([Lx; Ly; Lz]);\r\n    \r\n    % 计算单位方向向量 (线速度雅克比矩阵部分)\r\n    J(1:3, i) = CableVector / L_length;\r\n    \r\n    % 计算力矩分量 (力矩雅克比矩阵部分)\r\n    b_vector = [D(1,lower_idx) - platform_center(1); \r\n                D(2,lower_idx) - platform_center(2); \r\n                D(3,lower_idx) - platform_center(3)];\r\n    J(4:6, i) = cross(b_vector, J(1:3, i));\r\nend\r\n\r\n"
        }
    ]
}