{
    "sourceFile": "simulation_scripts/DefineCDPR_Plant.m",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1732523522297,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1732523522297,
            "name": "Commit-0",
            "content": "function [sys]=DefineCDPR_Plant(m,g)\r\n\r\nsyms q1 q2 q3 q4 q5 q6 p1 p2 p3 p4 p5 p6 t_sym\r\nq_sym = [q1 q2 q3 q4 q5 q6].';\r\np_sym = [p1 p2 p3 p4 p5 p6].';\r\n\r\n[sys.M,sys.P]=massMatrix(m,g);%计算质量矩阵和势能函数\r\n\r\nsys.V=sys.P;\r\nsys.H = @(q,p) 0.5*p.'*(sys.M(q)\\p) + sum(sys.V(q));%CDPR的能量函数\r\n%sys.D= @(q) diag([5,2,3,1,2,1]);\r\nsys.D= @(q) diag([0.1,0.1,0.1,0.1,0.1,0.1]);\r\nsys.G = @(q) diag([1;1;1;1;1;1]);\r\nsys.Hdq = matlabFunction(jacobian(sys.H(q_sym,p_sym),q_sym).','vars',[{q_sym}, {p_sym}]);\r\nsys.Hdp =  matlabFunction(jacobian(sys.H(q_sym,p_sym),p_sym).','vars',[{q_sym}, {p_sym}]);\r\nsys.dVdq = matlabFunction(jacobian(sum(sys.V(q_sym)),q_sym).','vars',{q_sym});\r\n\r\n% 定义匹配干扰\r\n\r\n[sys]=DefineDisturbance(sys);\r\nsys.dx = @(q,p,u,t) [zeros(6) eye(6); -eye(6) -sys.D(q)]*[sys.Hdq(q,p); sys.Hdp(q,p)] + [zeros(6); sys.G(q)]*(u+sys.match_distur(t));"
        }
    ]
}